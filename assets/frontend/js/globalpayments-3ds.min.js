this.GlobalPayments=this.GlobalPayments||{},this.GlobalPayments.ThreeDSecure=function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,n)};function n(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((r=r.apply(e,t||[])).next())})}function r(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function o(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function i(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}self.fetch||(self.fetch=function(e,t){return t=t||{},new Promise(function(n,r){var o=new XMLHttpRequest,i=[],a=[],c={},u=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:u,headers:{keys:function(){return i},entries:function(){return a},get:function(e){return c[e.toLowerCase()]},has:function(e){return e.toLowerCase()in c}}}};for(var s in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){i.push(t=t.toLowerCase()),a.push([t,n]),c[t]=c[t]?c[t]+","+n:n}),n(u())},o.onerror=r,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(s,t.headers[s]);o.send(t.body||null)})}),Array.prototype.forEach||(Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)});for(var a=function(e){var t=p(e),n=t[0],r=t[1];return 3*(n+r)/4-r},c=function(e){var t,n,r=p(e),o=r[0],i=r[1],a=new d(function(e,t,n){return 3*(t+n)/4-n}(0,o,i)),c=0,u=i>0?o-4:o;for(n=0;n<u;n+=4)t=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;2===i&&(t=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,a[c++]=255&t);1===i&&(t=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t);return a},u=function(e){for(var t,n=e.length,r=n%3,o=[],i=0,a=n-r;i<a;i+=16383)o.push(g(e,i,i+16383>a?a:i+16383));1===r?(t=e[n-1],o.push(s[t>>2]+s[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return o.join("")},s=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,y=f.length;h<y;++h)s[h]=f[h],l[f.charCodeAt(h)]=h;function p(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function g(e,t,n){for(var r,o,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(s[(o=r)>>18&63]+s[o>>12&63]+s[o>>6&63]+s[63&o]);return i.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63;var A,I={byteLength:a,toByteArray:c,fromByteArray:u},m=(o(function(e,t){function n(e){var t,n=e.length,r=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(n);for(t=0;t<n;t++)r[t]=e.charCodeAt(t);return I.fromByteArray(r)}function r(e){var t,n=I.toByteArray(e),r=n.length,o="";for(t=0;t<r;t++)o+=String.fromCharCode(n[t]);return o}Object.defineProperty(t,"__esModule",{value:!0}),t.base64decode=t.base64encode=void 0,t.base64encode=n,t.base64decode=r,window.btoa=window.btoa||n,window.atob=window.atob||r}),o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.JSON=void 0,t.JSON={},function(){function e(e){return e<10?"0"+e:e}if("function"!=typeof Date.prototype.toJSON){Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":""};var n=String.prototype;Number.prototype.JSON=n.JSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var r,o,i,a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(e){return c.lastIndex=0,c.test(e)?'"'+e.replace(c,function(e){var t=u[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof t.JSON.stringify&&(t.JSON.stringify=function(e,t,n){var a;if(r="",o="","number"==typeof n)for(a=0;a<n;a+=1)o+=" ";else"string"==typeof n&&(o=n);if(i=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,n){var a,c,u,l,d,f=r,h=n[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof i&&(h=i.call(n,t,h)),typeof h){case"string":return s(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(r+=o,d=[],"[object Array]"===Object.prototype.toString.apply(h,[])){for(l=h.length,a=0;a<l;a+=1)d[a]=e(a.toString(),h)||"null";return u=0===d.length?"[]":r?"[\n"+r+d.join(",\n"+r)+"\n"+f+"]":"["+d.join(",")+"]",r=f,u}if(i&&"object"==typeof i)for(l=i.length,a=0;a<l;a+=1)"string"==typeof i[a]&&(u=e(c=i[a],h))&&d.push(s(c)+(r?": ":":")+u);else for(c in h)Object.prototype.hasOwnProperty.call(h,c)&&(u=e(c,h))&&d.push(s(c)+(r?": ":":")+u);return u=0===d.length?"{}":r?"{\n"+r+d.join(",\n"+r)+"\n"+f+"}":"{"+d.join(",")+"}",r=f,u}}("",{"":e})}),"function"!=typeof t.JSON.parse&&(t.JSON.parse=function(e,t){var n;if(e=String(e),a.lastIndex=0,a.test(e)&&(e=e.replace(a,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return n=new Function("return ("+e+")")(),"function"==typeof t?function e(n,r){var o,i,a=n[r];if(a&&"object"==typeof a)for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i=e(a,o),a[o]=i);return t.call(n,r,a)}({"":n},""):n;throw new SyntaxError("JSON.parse")})}()}));o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),window.JSON=window.JSON||m.JSON});Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(e){Object.freeze=(A=Object.freeze,function(e){return"function"==typeof e?e:A(e)})}Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e){return void 0!==this[e]}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){var t=[];for(var n in e)void 0!==e.hasOwnProperty&&e.hasOwnProperty(n)&&t.push(n);return t}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(String(e)))}),this.insertBefore(t,this.firstChild)}})});var N=setTimeout;function w(e){return Boolean(e&&void 0!==e.length)}function b(){}function T(e){if(!(this instanceof T))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],j(e,this)}function M(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,T._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void C(t.promise,e)}v(t.promise,r)}else(1===e._state?v:C)(t.promise,e._value)})):e._deferreds.push(t)}function v(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof T)return e._state=3,e._value=t,void E(e);if("function"==typeof n)return void j((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,E(e)}catch(t){C(e,t)}var r,o}function C(e,t){e._state=2,e._value=t,E(e)}function E(e){2===e._state&&0===e._deferreds.length&&T._immediateFn(function(){e._handled||T._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)M(e,e._deferreds[t]);e._deferreds=null}function S(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function j(e,t){var n=!1;try{e(function(e){n||(n=!0,v(t,e))},function(e){n||(n=!0,C(t,e))})}catch(e){if(n)return;n=!0,C(t,e)}}T.prototype.catch=function(e){return this.then(null,e)},T.prototype.then=function(e,t){var n=new this.constructor(b);return M(this,new S(e,t,n)),n},T.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},T.all=function(e){return new T(function(t,n){if(!w(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(t){i(e,t)},n)}r[e]=a,0==--o&&t(r)}catch(e){n(e)}}for(var a=0;a<r.length;a++)i(a,r[a])})},T.allSettled=function(e){return new this(function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,function(t){i(e,t)},function(n){r[e]={status:"rejected",reason:n},0==--o&&t(r)})}r[e]={status:"fulfilled",value:n},0==--o&&t(r)}for(var a=0;a<r.length;a++)i(a,r[a])})},T.resolve=function(e){return e&&"object"==typeof e&&e.constructor===T?e:new T(function(t){t(e)})},T.reject=function(e){return new T(function(t,n){n(e)})},T.race=function(e){return new T(function(t,n){if(!w(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)T.resolve(e[r]).then(t,n)})},T._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){N(e,0)},T._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var R=i(Object.freeze({__proto__:null,default:T}));o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),window.Promise=window.Promise||R.default||R});String.prototype.repeat||(String.prototype.repeat=function(e){for(var t="",n=0;n<e;n++)t+=this;return t});var D,O,_,U,L,P,G,z;o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0})});function x(e){var t="";switch(e){case 1:return"ONE_BIT";case 2:t+="TWO";break;case 4:t+="FOUR";break;case 8:t+="EIGHT";break;case 15:t+="FIFTEEN";break;case 16:t+="SIXTEEN";break;case 24:case 30:t+="TWENTY_FOUR";break;case 32:t+="THIRTY_TWO";break;case 48:t+="FORTY_EIGHT";break;default:throw new Error("Unknown color depth '"+e+"'")}return t+"_BITS"}function Z(t){var n=0,r=0;switch(t.size||t.windowSize){case e.ChallengeWindowSize.Windowed250x400:n=250,r=400;break;case e.ChallengeWindowSize.Windowed390x400:n=390,r=400;break;case e.ChallengeWindowSize.Windowed500x600:n=500,r=600;break;case e.ChallengeWindowSize.Windowed600x400:n=600,r=400}return{height:n,width:r}}function Y(t){switch(t){case e.AuthenticationRequestType.AddCard:case e.AuthenticationRequestType.CardholderVerification:case e.AuthenticationRequestType.MaintainCard:return e.MessageCategory.NonPayment;case e.AuthenticationRequestType.InstalmentTransaction:case e.AuthenticationRequestType.PaymentTransaction:case e.AuthenticationRequestType.RecurringTransaction:default:return e.MessageCategory.Payment}}(D=e.AuthenticationSource||(e.AuthenticationSource={})).Browser="BROWSER",D.MobileSDK="MOBILE_SDK",D.StoredRecurring="STORED_RECURRING",(O=e.AuthenticationRequestType||(e.AuthenticationRequestType={})).AddCard="ADD_CARD",O.CardholderVerification="CARDHOLDER_VERIFICATION",O.InstalmentTransaction="INSTALMENT_TRANSACTION",O.MaintainCard="MAINTAIN_CARD",O.PaymentTransaction="PAYMENT_TRANSACTION",O.RecurringTransaction="RECURRING_TRANSACTION",(_=e.ChallengeRequestIndicator||(e.ChallengeRequestIndicator={})).ChallengeMandated="CHALLENGE_MANDATED",_.ChallengePreferred="CHALLENGE_PREFERRED",_.NoChallengeRequested="NO_CHALLENGE_REQUESTED",_.NoPreference="NO_PREFERENCE",(U=e.ChallengeWindowSize||(e.ChallengeWindowSize={})).FullScreen="FULL_SCREEN",U.Windowed250x400="WINDOWED_250X400",U.Windowed390x400="WINDOWED_390X400",U.Windowed500x600="WINDOWED_500X600",U.Windowed600x400="WINDOWED_600X400",(L=e.MessageCategory||(e.MessageCategory={})).NonPayment="NON_PAYMENT_AUTHENTICATION",L.Payment="PAYMENT_AUTHENTICATION",(P=e.MethodUrlCompletion||(e.MethodUrlCompletion={})).Unavailable="UNAVAILABLE",P.No="NO",P.Yes="YES",(G=e.TransactionStatus||(e.TransactionStatus={})).AuthenticationAttemptedButNotSuccessful="AUTHENTICATION_ATTEMPTED_BUT_NOT_SUCCESSFUL",G.AuthenticationCouldNotBePerformed="AUTHENTICATION_COULD_NOT_BE_PERFORMED",G.AuthenticationFailed="AUTHENTICATION_FAILED",G.AuthenticationIssuerRejected="AUTHENTICATION_ISSUER_REJECTED",G.AuthenticationSuccessful="AUTHENTICATION_SUCCESSFUL",G.ChallengeRequired="CHALLENGE_REQUIRED",(z=e.TransactionStatusReason||(e.TransactionStatusReason={})).CardAuthenticationFailed="CARD_AUTHENTICATION_FAILED",z.UnknownDevice="UNKNOWN_DEVICE",z.UnsupportedDevice="UNSUPPORTED_DEVICE",z.ExceedsAuthenticationFrequencyLimit="EXCEEDS_AUTHENTICATION_FREQUENCY_LIMIT",z.ExpiredCard="EXPIRED_CARD",z.InvalidCardNumber="INVALID_CARD_NUMBER",z.InvalidTransaction="INVALID_TRANSACTION",z.NoCardRecord="NO_CARD_RECORD",z.SecurityFailure="SECURITY_FAILURE",z.StolenCard="STOLEN_CARD",z.SuspectedFraud="SUSPECTED_FRAUD",z.TransactionNotPermittedToCardholder="TRANSACTION_NOT_PERMITTED_TO_CARDHOLDER",z.CardholderNotEnrolledInService="CARDHOLDER_NOT_ENROLLED_IN_SERVICE",z.TransactionTimedOutAtTheAcs="TRANSACTION_TIMED_OUT_AT_THE_ACS",z.LowConfidence="LOW_CONFIDENCE",z.MediumConfidence="MEDIUM_CONFIDENCE",z.HighConfidence="HIGH_CONFIDENCE",z.VeryHighConfidence="VERY_HIGH_CONFIDENCE",z.ExceedsAcsMaximumChallenges="EXCEEDS_ACS_MAXIMUM_CHALLENGES",z.NonPaymentTransactionNotSupported="NON_PAYMENT_TRANSACTION_NOT_SUPPORTED",z.ThreeriTransactionNotSupported="THREERI_TRANSACTION_NOT_SUPPORTED";var W=function(e){function n(t,n){var r=e.call(this,n||"Error: see `reasons` property")||this;return r.error=!0,r.reasons=t,r}return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,e),n}(Error);function F(e,t,n){window.parent!==window&&window.parent.postMessage({data:t,event:e},n||window.location.origin)}function H(e,t){return n(this,void 0,void 0,function(){var n,o,i,a,c,u;return r(this,function(r){switch(r.label){case 0:n={"Content-Type":"application/json"},r.label=1;case 1:return r.trys.push([1,6,,7]),[4,fetch(e,{body:JSON.stringify(t),credentials:"omit",headers:"undefined"!=typeof Headers?new Headers(n):n,method:"POST"})];case 2:return(o=r.sent()).ok?[3,4]:(i=W.bind,u={code:o.status.toString()},[4,o.text()]);case 3:throw new(i.apply(W,[void 0,[(u.message=r.sent(),u)],o.statusText]));case 4:return[4,o.json()];case 5:return[2,r.sent()];case 6:throw a=r.sent(),c=[{code:a.name,message:a.message}],a.reasons&&(c=c.concat(a.reasons)),new W(c);case 7:return[2]}})})}var k=/Windows Phone|IEMobile/.test(navigator.userAgent),J=/Android|iPad|iPhone|iPod/.test(navigator.userAgent),B=(window.innerWidth>0?window.innerWidth:screen.width)<=360||(window.innerHeight>0?window.innerHeight:screen.height)<=360,V=k||!k&&(J||B),Q=Math.random().toString(16).substr(2,8);function q(t,n){var r=function(){var e=document.createElement("div");e.setAttribute("id","GlobalPayments-overlay-"+Q),e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.transition="all 0.3s ease-in-out",e.style.zIndex="100",V&&(e.style.position="absolute !important",e.style.WebkitOverflowScrolling="touch",e.style.overflowX="hidden",e.style.overflowY="scroll");return document.body.appendChild(e),setTimeout(function(){e.style.background="rgba(0, 0, 0, 0.7)"},1),e}(),o=function(){var e=document.createElement("img");return e.setAttribute("src","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48cGF0aCBkPSJNMzguNTIgMzMuMzdMMjEuMzYgMTYuMkE2My42IDYzLjYgMCAwIDEgNTkuNS4xNnYyNC4zYTM5LjUgMzkuNSAwIDAgMC0yMC45OCA4LjkyeiIgZmlsbD0iIzAwNzBiYSIgZmlsbC1vcGFjaXR5PSIxIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoNDUgNjQgNjQpIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgNjQgNjQpIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTM1IDY0IDY0KSIvPjxwYXRoIGQ9Ik0zOC41MiAzMy4zN0wyMS4zNiAxNi4yQTYzLjYgNjMuNiAwIDAgMSA1OS41LjE2djI0LjNhMzkuNSAzOS41IDAgMCAwLTIwLjk4IDguOTJ6IiBmaWxsPSIjYzBkY2VlIiBmaWxsLW9wYWNpdHk9IjAuMjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA2NCA2NCkiLz48cGF0aCBkPSJNMzguNTIgMzMuMzdMMjEuMzYgMTYuMkE2My42IDYzLjYgMCAwIDEgNTkuNS4xNnYyNC4zYTM5LjUgMzkuNSAwIDAgMC0yMC45OCA4LjkyeiIgZmlsbD0iI2MwZGNlZSIgZmlsbC1vcGFjaXR5PSIwLjI1IiB0cmFuc2Zvcm09InJvdGF0ZSgyMjUgNjQgNjQpIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxwYXRoIGQ9Ik0zOC41MiAzMy4zN0wyMS4zNiAxNi4yQTYzLjYgNjMuNiAwIDAgMSA1OS41LjE2djI0LjNhMzkuNSAzOS41IDAgMCAwLTIwLjk4IDguOTJ6IiBmaWxsPSIjYzBkY2VlIiBmaWxsLW9wYWNpdHk9IjAuMjUiIHRyYW5zZm9ybT0icm90YXRlKDMxNSA2NCA2NCkiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgdmFsdWVzPSIwIDY0IDY0OzQ1IDY0IDY0OzkwIDY0IDY0OzEzNSA2NCA2NDsxODAgNjQgNjQ7MjI1IDY0IDY0OzI3MCA2NCA2NDszMTUgNjQgNjQiIGNhbGNNb2RlPSJkaXNjcmV0ZSIgZHVyPSIxMjgwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg=="),e.setAttribute("id","GlobalPayments-loader-"+Q),e.style.left="50%",e.style.position="fixed",e.style.background="#FFFFFF",e.style.borderRadius="50%",e.style.width="30px",e.style.zIndex="200",e.style.marginLeft="-15px",e.style.top="120px",e}();document.body.appendChild(o);var i=Z(n),a=i.height,c=i.width;if(a&&t.setAttribute("height",a+"px"),t.setAttribute("frameBorder","0"),c&&t.setAttribute("width",c+"px"),t.setAttribute("seamless","seamless"),t.style.zIndex="10001",t.style.position="absolute",t.style.transition="transform 0.5s ease-in-out",t.style.transform="scale(0.7)",t.style.opacity="0",r.appendChild(t),V||n.windowSize===e.ChallengeWindowSize.FullScreen){t.style.top="0px",t.style.bottom="0px",t.style.left="0px",t.style.marginLeft="0px;",t.style.width="100%",t.style.height="100%",t.style.minHeight="100%",t.style.WebkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0, 0, 0)";var u=document.createElement("meta");u.name="viewport",u.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",document.getElementsByTagName("head")[0].appendChild(u)}else t.style.top="40px",t.style.left="50%",t.style.marginLeft="-"+c/2+"px";t.onload=function(t,n,r,o){return function(){var i;t.style.opacity="1",t.style.transform="scale(1)",t.style.backgroundColor="#ffffff",n.parentNode&&n.parentNode.removeChild(n),(i=function(t){if(null!==document.getElementById("GlobalPayments-frame-close-"+Q))return;var n=document.createElement("img");n.id="GlobalPayments-frame-close-"+Q,n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUJFRjU1MEIzMUQ3MTFFNThGQjNERjg2NEZCRjFDOTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUJFRjU1MEMzMUQ3MTFFNThGQjNERjg2NEZCRjFDOTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQkVGNTUwOTMxRDcxMUU1OEZCM0RGODY0RkJGMUM5NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQkVGNTUwQTMxRDcxMUU1OEZCM0RGODY0RkJGMUM5NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlHco5QAAAHpSURBVHjafFRdTsJAEF42JaTKn4glGIg++qgX4AAchHAJkiZcwnAQD8AF4NFHCaC2VgWkIQQsfl/jNJUik8Duzs/XmW9mN7Xb7VRc5vP5zWKxaK5Wq8Zmu72FqobfJG0YQ9M0+/l8/qFQKDzGY1JxENd1288vLy1s786KRZXJZCLber1Wn7MZt4PLarVnWdZ9AmQ8Hncc17UvymVdBMB/MgPQm+cFFcuy6/V6lzqDf57ntWGwYdBIVx0TfkBD6I9M35iRJgfIoAVjBLDZbA4CiJ5+9AdQi/EahibqDTkQx6fRSIHcPwA8Uy9A9Gcc47Xv+w2wzhRDYzqdVihLIbsIiCvP1NNOoX/29FQx3vgOgtt4FyRdCgPRarX4+goB9vkyAMh443cOEsIAAcjncuoI4TXWMAmCIGFhCQLAdZ8jym/cRJ+Y5nC5XCYAhINKpZLgSISZgoqh5iiLQrojAFICVwGS7tCfe5DbZzkP56XS4NVxwvTI/vXVVYIDnqmnnX70ZxzjNS8THHooK5hMpxHQIREA+tEfA9djfHR3MHkdx3Hspe9r3B+VzWaj2RESyR2mlCUE4MoGQDdxiwHURq2t94+PO9bMIYyTyDNLwMoM7g8+BfKeYGniyw2MdfSehF3Qmk1IvCc/AgwAaS86Etp38bUAAAAASUVORK5CYII=",n.style.transition="all 0.5s ease-in-out",n.style.opacity="0",n.style.float="left",n.style.position="absolute",n.style.left="50%",n.style.zIndex="99999999",n.style.top="30px";var r=Z(t).width;r&&(n.style.marginLeft=r/2-8+"px");setTimeout(function(){n.style.opacity="1"},500),(V||t.windowSize===e.ChallengeWindowSize.FullScreen)&&(n.style.float="right",n.style.top="20px",n.style.left="initial",n.style.marginLeft="0px",n.style.right="20px");return n}(o))&&(r.appendChild(i),i.addEventListener("click",function(){i&&Array.prototype.slice.call(document.querySelectorAll('[target$="-'+Q+'"],[id$="-'+Q+'"]')).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})},!0))}}(t,o,r,n)}function X(e,t,n){return new Promise(function(r,o){var i;n.timeout&&(i=setTimeout(function(){K(i),o(new Error("timeout reached"))},n.timeout));var a=document.createElement("iframe");a.id=a.name="GlobalPayments-3DSecure-"+Q,a.style.display=n.hide?"none":"inherit";var c=function(e,t,n){var r=document.createElement("form");r.setAttribute("method","POST"),r.setAttribute("action",e),r.setAttribute("target",t);for(var o=0,i=n;o<i.length;o++){var a=i[o],c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name",a.name),c.setAttribute("value",a.value),r.appendChild(c)}return r}(e,a.id,t);switch(n.displayMode){case"redirect":return K(i),void o(new Error("Not implemented"));case"lightbox":q(a,n);break;case"embedded":default:if(!function(e,t,n){var r;r=n.hide?document.body:"string"==typeof n.target?document.querySelector(n.target):n.target;if(!r)return K(t.timeout||0),e(new Error("Embed target not found")),!1;var o=Z(n),i=o.height,a=o.width;t.iframe&&(t.iframe.setAttribute("height",i?i+"px":"100%"),t.iframe.setAttribute("width",a?a+"px":"100%"),r.appendChild(t.iframe));return!0}(o,{iframe:a,timeout:i},n))return}window.addEventListener("message",function(e,t){return function(n){var r=t.origin||window.location.origin;r===n.origin&&(K(t.timeout||0),e(n.data))}}(r,{origin:n.origin,timeout:i})),document.body.appendChild(c),c.submit()})}function K(e){e&&clearTimeout(e);try{Array.prototype.slice.call(document.querySelectorAll('[target$="-'+Q+'"],[id$="-'+Q+'"]')).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}catch(e){}}function $(){var e=new Date;return{colorDepth:screen&&x(screen.colorDepth),javaEnabled:navigator&&navigator.javaEnabled(),javascriptEnabled:!0,language:navigator&&navigator.language,screenHeight:screen&&screen.height,screenWidth:screen&&screen.width,time:e,timezoneOffset:e.getTimezoneOffset()/60,userAgent:navigator&&navigator.userAgent}}function ee(e,t){return n(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:if(!e.enrolled)throw new Error("Card not enrolled");return(t=t||{}).hide=void 0===t.hide||t.hide,t.timeout=void 0===t.timeout?3e4:t.timeout,e.methodUrl?[4,X(e.methodUrl,[{name:"threeDSMethodData",value:e.methodData}],t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,e]}})})}function te(t,o){return n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:if(!t.challengeMandated&&t.status!==e.TransactionStatus.ChallengeRequired)return[3,2];if(t.challenge=t.challenge||{},!t.challenge.requestUrl)throw new Error("Invalid challenge state. Missing challenge URL");return[4,X(t.challenge.requestUrl,[{name:"TermUrl",value:t.TermUrl},{name:"MD",value:t.serverTransactionId},{name:"PaReq",value:t.challenge.encodedChallengeRequest}],o)];case 1:n=r.sent(),t.challenge.response=n,r.label=2;case 2:return[2,t]}})})}function ne(t,o){return n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:if(!t.challengeMandated&&t.status!==e.TransactionStatus.ChallengeRequired)return[3,2];if(t.challenge=t.challenge||{},!t.challenge.requestUrl)throw new Error("Invalid challenge state. Missing challenge URL");return[4,X(t.challenge.requestUrl,[{name:"creq",value:t.challenge.encodedChallengeRequest}],o)];case 1:n=r.sent(),t.challenge.response=n,r.label=2;case 2:return[2,t]}})})}return e.checkVersion=function(e,t){return n(this,void 0,void 0,function(){var n,o,i;return r(this,function(r){switch(r.label){case 0:t=t||{},r.label=1;case 1:return r.trys.push([1,4,,5]),[4,H(e,t)];case 2:return"ONE"===(n=r.sent()).version?[4,te(n,t.challengeWindow)]:[4,ee(n,t.methodWindow)];case 3:return[2,r.sent()];case 4:throw o=r.sent(),i=[{code:o.name,message:o.message}],o.reasons&&(i=i.concat(o.reasons)),new W(i);case 5:return[2]}})})},e.colorDepth=x,e.dimensionsFromChallengeWindowSize=Z,e.getBrowserData=$,e.handle3dsVersionCheck=ee,e.handleChallengeNotification=function(e,t){F("challengeNotification",e,t)},e.handleInitiateAuthentication=ne,e.handleMethodNotification=function(e,t){F("methodNotification",e,t)},e.initiateAuthentication=function(t,o){return n(this,void 0,void 0,function(){var n,i;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),o.authenticationSource=o.authenticationSource||e.AuthenticationSource.Browser,o.authenticationRequestType=o.authenticationRequestType||e.AuthenticationRequestType.PaymentTransaction,o.messageCategory=o.messageCategory||Y(o.authenticationRequestType),o.challengeRequestIndicator=o.challengeRequestIndicator||e.ChallengeRequestIndicator.NoPreference,o.browserData=o.browserData||$(),[4,H(t,o)];case 1:return[4,ne(r.sent(),o.challengeWindow)];case 2:return[2,r.sent()];case 3:throw n=r.sent(),i=[{code:n.name,message:n.message}],n.reasons&&(i=i.concat(n.reasons)),new W(i);case 4:return[2]}})})},e.messageCategoryFromAuthenticationRequestType=Y,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=globalpayments-3ds.min.js.map
